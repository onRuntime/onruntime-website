---
title: API 参考
description: '@onruntime/translations 的完整 API 文档'
---
## TranslationsProvider

提供者组件用于包装你的应用。

```tsx
import { TranslationsProvider } from "@onruntime/translations/react";

<TranslationsProvider
  locale="zh"
  locales={{ en, fr }}
  fallbackLocale="en"
>
  {children}
</TranslationsProvider>
```

### Props

| Prop | Type | Required | Description |
|------|------|----------|-------------|
| `locale` | `string` | Yes | 当前活跃的语言环境 |
| `locales` | `Record<string, object>` | Yes | 包含所有语言环境翻译的对象 |
| `fallbackLocale` | `string` | No | 当缺少键时的后备语言环境 |
| `children` | `ReactNode` | Yes | 子组件 |

## useTranslation

在客户端组件中访问翻译的钩子。

```tsx
const { t, locale, setLocale } = useTranslation("namespace");
```

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `namespace` | `string` | Yes | 要使用的翻译命名空间 |

### Returns

| Property | Type | Description |
|----------|------|-------------|
| `t` | `(key: string, vars?: object) => string` | 翻译函数 |
| `locale` | `string` | 当前语言环境 |
| `setLocale` | `(locale: string) => void` | 更改语言环境的函数 |

### Example

```tsx
const { t, locale, setLocale } = useTranslation("common");

// 基本用法
t("greeting");  // "你好"

// 带变量
t("greeting_name", { name: "约翰" });  // "你好, 约翰!"

// 嵌套键
t("nav.home");  // "首页"

// 更改语言环境
setLocale("fr");
```

## getTranslation

在服务器组件（Next.js）中访问翻译的异步函数。

```tsx
const { t } = await getTranslation("namespace");
```

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `namespace` | `string` | Yes | 要使用的翻译命名空间 |

### Returns

| Property | Type | Description |
|----------|------|-------------|
| `t` | `(key: string, vars?: object) => string` | 翻译函数 |
| `locale` | `string` | 当前语言环境 |

### Example

```tsx
// 服务器组件
export default async function Page() {
  const { t } = await getTranslation("common");

  return <h1>{t("title")}</h1>;
}
```

## Link Component

具备语言环境感知的 Next.js Link 组件。

```tsx
import { Link } from "@onruntime/translations/next";

<Link href="/about">关于</Link>
```

### Props

来自 Next.js `Link` 组件的所有 props，以及：

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `locale` | `string` | 当前语言环境 | 覆盖链接的语言环境 |

### Example

```tsx
// 使用当前语言环境
<Link href="/about">关于</Link>

// 强制使用特定语言环境
<Link href="/about" locale="fr">À propos</Link>
```

## Translation Function (t)

`t` 函数用于检索翻译字符串。

### Signature

```tsx
t(key: string, variables?: Record<string, string | number>): string
```

### Parameters

| Parameter | Type | Description |
|-----------|------|-------------|
| `key` | `string` | 翻译键（支持点表示法） |
| `variables` | `object` | 要插入的变量 |

### Variable Interpolation

```json
{
  "greeting": "你好, {name}!",
  "items": "你有 {count} 个物品"
}
```

```tsx
t("greeting", { name: "爱丽丝" });  // "你好, 爱丽丝!"
t("items", { count: 5 });          // "你有 5 个物品"
```

### Nested Keys

```json
{
  "user": {
    "profile": {
      "title": "个人资料"
    }
  }
}
```

```tsx
t("user.profile.title");  // "个人资料"
```

## Type Definitions

### TranslationNamespaces

扩展这个接口以实现类型安全的翻译：

```tsx
declare module "@onruntime/translations" {
  interface TranslationNamespaces {
    common: typeof import("./locales/en/common.json");
    auth: typeof import("./locales/en/auth.json");
  }
}
```

<Callout type="info" title="TypeScript 优势">
  通过正确的类型定义，你将获得翻译键的自动完成功能，以及无效键的编译时错误。
</Callout>
